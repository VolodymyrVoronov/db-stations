import{a as e}from"./rolldown-runtime-Cn8xt2Gj.js";import{a as t}from"./framer-motion-Jr-DK7GE.js";function n(e){return`init`in e}function r(e){return!!e.write}function i(e){return`v`in e||`e`in e}function a(e){if(`e`in e)throw e.e;return e.v}var o=new WeakMap;function s(e){return u(e)&&!!o.get(e)?.[0]}function c(e){let t=o.get(e);t?.[0]&&(t[0]=!1,t[1].forEach(e=>e()))}function l(e,t){let n=o.get(e);if(!n){n=[!0,new Set],o.set(e,n);let t=()=>{n[0]=!1};e.then(t,t)}n[1].add(t)}function u(e){return typeof e?.then==`function`}function d(e,t,n){if(!n.p.has(e)){n.p.add(e);let r=()=>n.p.delete(e);t.then(r,r)}}function f(e,t,n){let r=new Set;for(let t of n.get(e)?.t||[])r.add(t);for(let e of t.p)r.add(e);return r}var p=(e,t,...n)=>t.read(...n),m=(e,t,...n)=>t.write(...n),h=(e,t)=>{if(t.INTERNAL_onInit)return t.INTERNAL_onInit(e)},g=(e,t,n)=>t.onMount?.call(t,n),_=(e,t)=>{var n;let r=j(e),i=r[0],a=r[6],o=r[9],s=i.get(t);return s||(s={d:new Map,p:new Set,n:0},i.set(t,s),(n=a.i)==null||n.call(a,t),o?.(e,t)),s},v=e=>{let t=j(e),n=t[1],r=t[3],i=t[4],a=t[5],o=t[6],s=t[13],c=[],l=e=>{try{e()}catch(e){c.push(e)}};do{o.f&&l(o.f);let t=new Set,c=t.add.bind(t);r.forEach(e=>n.get(e)?.l.forEach(c)),r.clear(),a.forEach(c),a.clear(),i.forEach(c),i.clear(),t.forEach(l),r.size&&s(e)}while(r.size||a.size||i.size);if(c.length)throw AggregateError(c)},y=e=>{let t=j(e),n=t[1],r=t[2],i=t[3],a=t[11],o=t[14],s=t[17],c=[],l=new WeakSet,u=new WeakSet,d=Array.from(i);for(;d.length;){let t=d[d.length-1],i=a(e,t);if(u.has(t)){d.pop();continue}if(l.has(t)){r.get(t)===i.n&&c.push([t,i]),u.add(t),d.pop();continue}l.add(t);for(let e of f(t,i,n))l.has(e)||d.push(e)}for(let t=c.length-1;t>=0;--t){let[n,a]=c[t],l=!1;for(let e of a.d.keys())if(e!==n&&i.has(e)){l=!0;break}l&&(o(e,n),s(e,n)),r.delete(n)}},b=(e,t)=>{var o,c;let f=j(e),p=f[1],m=f[2],h=f[3],g=f[6],_=f[7],v=f[11],y=f[12],b=f[13],x=f[14],S=f[16],C=f[17],w=f[20],T=v(e,t);if(i(T)){if(p.has(t)&&m.get(t)!==T.n)return T;let n=!1;for(let[t,r]of T.d)if(x(e,t).n!==r){n=!0;break}if(!n)return T}T.d.clear();let E=!0;function D(){p.has(t)&&(C(e,t),b(e),y(e))}function O(r){var o;if(r===t){let t=v(e,r);if(!i(t))if(n(r))w(e,r,r.init);else throw Error(`no atom init`);return a(t)}let c=x(e,r);try{return a(c)}finally{T.d.set(r,c.n),s(T.v)&&d(t,T.v,c),p.has(t)&&((o=p.get(r))==null||o.t.add(t)),E||D()}}let k,A,M={get signal(){return k||=new AbortController,k.signal},get setSelf(){return!A&&r(t)&&(A=(...n)=>{if(!E)try{return S(e,t,...n)}finally{b(e),y(e)}}),A}},N=T.n;try{let n=_(e,t,O,M);return w(e,t,n),u(n)&&(l(n,()=>k?.abort()),n.then(D,D)),(o=g.r)==null||o.call(g,t),T}catch(e){return delete T.v,T.e=e,++T.n,T}finally{E=!1,N!==T.n&&m.get(t)===N&&(m.set(t,T.n),h.add(t),(c=g.c)==null||c.call(g,t))}},x=(e,t)=>{let n=j(e),r=n[1],i=n[2],a=n[11],o=[t];for(;o.length;){let t=o.pop(),n=a(e,t);for(let s of f(t,n,r)){let t=a(e,s);i.set(s,t.n),o.push(s)}}},S=(e,t,...r)=>{let i=j(e),o=i[3],s=i[6],c=i[8],l=i[11],u=i[12],d=i[13],f=i[14],p=i[15],m=i[16],h=i[17],g=i[20],_=!0,v=t=>a(f(e,t)),y=(r,...i)=>{var a;let c=l(e,r);try{if(r===t){if(!n(r))throw Error(`atom not writable`);let t=c.n,l=i[0];g(e,r,l),h(e,r),t!==c.n&&(o.add(r),p(e,r),(a=s.c)==null||a.call(s,r));return}else return m(e,r,...i)}finally{_||(d(e),u(e))}};try{return c(e,t,v,y,...r)}finally{_=!1}},C=(e,t)=>{var n;let r=j(e),i=r[1],a=r[3],o=r[6],c=r[11],l=r[15],u=r[18],d=r[19],f=c(e,t),p=i.get(t);if(p&&!s(f.v)){for(let[r,i]of f.d)if(!p.d.has(r)){let s=c(e,r);u(e,r).t.add(t),p.d.add(r),i!==s.n&&(a.add(r),l(e,r),(n=o.c)==null||n.call(o,r))}for(let n of p.d)f.d.has(n)||(p.d.delete(n),d(e,n)?.t.delete(t))}},w=(e,t)=>{var n;let i=j(e),a=i[1],o=i[4],s=i[6],c=i[10],l=i[11],u=i[12],d=i[13],f=i[14],p=i[16],m=i[18],h=l(e,t),g=a.get(t);if(!g){f(e,t);for(let n of h.d.keys())m(e,n).t.add(t);g={l:new Set,d:new Set(h.d.keys()),t:new Set},a.set(t,g),r(t)&&o.add(()=>{let n=!0,r=(...r)=>{try{return p(e,t,...r)}finally{n||(d(e),u(e))}};try{let i=c(e,t,r);i&&(g.u=()=>{n=!0;try{i()}finally{n=!1}})}finally{n=!1}}),(n=s.m)==null||n.call(s,t)}return g},T=(e,t)=>{var n;let r=j(e),i=r[1],a=r[5],o=r[6],s=r[11],c=r[19],l=s(e,t),u=i.get(t);if(!u||u.l.size)return u;let d=!1;for(let e of u.t)if(i.get(e)?.d.has(t)){d=!0;break}if(!d){u.u&&a.add(u.u),u=void 0,i.delete(t);for(let n of l.d.keys())c(e,n)?.t.delete(t);(n=o.u)==null||n.call(o,t);return}return u},E=(e,t,n)=>{let r=j(e)[11],i=r(e,t),a=`v`in i,o=i.v;if(u(n))for(let a of i.d.keys())d(t,n,r(e,a));i.v=n,delete i.e,(!a||!Object.is(o,i.v))&&(++i.n,u(o)&&c(o))},D=(e,t)=>{let n=j(e)[14];return a(n(e,t))},O=(e,t,...n)=>{let r=j(e),i=r[12],a=r[13],o=r[16];try{return o(e,t,...n)}finally{a(e),i(e)}},k=(e,t,n)=>{let r=j(e),i=r[12],a=r[18],o=r[19],s=a(e,t).l;return s.add(n),i(e),()=>{s.delete(n),o(e,t),i(e)}},A=new WeakMap,j=e=>A.get(e);function M(...e){let t={get(e){let n=j(t)[21];return n(t,e)},set(e,...n){let r=j(t)[22];return r(t,e,...n)},sub(e,n){let r=j(t)[23];return r(t,e,n)}},n=[new WeakMap,new WeakMap,new WeakMap,new Set,new Set,new Set,{},p,m,h,g,_,v,y,b,x,S,C,w,T,E,D,O,k,void 0].map((t,n)=>e[n]||t);return A.set(t,Object.freeze(n)),t}var N=0;function P(e,t){let n=`atom${++N}`,r={toString(){return n}};return typeof e==`function`?r.read=e:(r.init=e,r.read=F,r.write=I),t&&(r.write=t),r}function F(e){return e(this)}function I(e,t,n){return t(this,typeof n==`function`?n(e(this)):n)}var L;function R(){return L?L():M()}var z;function B(){return z||=R(),z}var V=e(t(),1),H=(0,V.createContext)(void 0);function U(e){let t=(0,V.useContext)(H);return e?.store||t||B()}var W=e=>typeof e?.then==`function`,G=e=>{e.status||(e.status=`pending`,e.then(t=>{e.status=`fulfilled`,e.value=t},t=>{e.status=`rejected`,e.reason=t}))},K=V.use||(e=>{if(e.status===`pending`)throw e;if(e.status===`fulfilled`)return e.value;throw e.status===`rejected`?e.reason:(G(e),e)}),q=new WeakMap,J=(e,t)=>{let n=q.get(e);return n||(n=new Promise((r,i)=>{let a=e,o=e=>t=>{a===e&&r(t)},s=e=>t=>{a===e&&i(t)},c=()=>{try{let e=t();W(e)?(q.set(e,n),a=e,e.then(o(e),s(e)),l(e,c)):r(e)}catch(e){i(e)}};e.then(o(e),s(e)),l(e,c)}),q.set(e,n)),n};function Y(e,t){let{delay:n,unstable_promiseStatus:r=!V.use}=t||{},i=U(t),[[a,o,s],c]=(0,V.useReducer)(t=>{let n=i.get(e);return Object.is(t[0],n)&&t[1]===i&&t[2]===e?t:[n,i,e]},void 0,()=>[i.get(e),i,e]),l=a;if((o!==i||s!==e)&&(c(),l=i.get(e)),(0,V.useEffect)(()=>{let t=i.sub(e,()=>{if(r)try{let t=i.get(e);W(t)&&G(J(t,()=>i.get(e)))}catch{}if(typeof n==`number`){setTimeout(c,n);return}c()});return c(),t},[i,e,n,r]),(0,V.useDebugValue)(l),W(l)){let t=J(l,()=>i.get(e));return r&&G(t),K(t)}return l}function X(e,t){let n=U(t);return(0,V.useCallback)((...t)=>n.set(e,...t),[n,e])}export{X as n,P as r,Y as t};